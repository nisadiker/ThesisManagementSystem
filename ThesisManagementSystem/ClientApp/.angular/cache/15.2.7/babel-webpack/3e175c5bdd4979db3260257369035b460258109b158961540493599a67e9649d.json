{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../services/thesisManagementSystem.service\";\nfunction AddInstituteComponent_option_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const university_r3 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", university_r3.universityId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(university_r3.universityName);\n  }\n}\nfunction AddInstituteComponent_span_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 14);\n    i0.ɵɵtext(1, \" University is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddInstituteComponent_span_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 14);\n    i0.ɵɵtext(1, \" Institute Name is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class AddInstituteComponent {\n  constructor(fb, avRoute, thesisManagementSystemService, router) {\n    this.fb = fb;\n    this.avRoute = avRoute;\n    this.thesisManagementSystemService = thesisManagementSystemService;\n    this.router = router;\n    this.universities = [];\n    this.title = 'Create';\n    this.instituteId = 0;\n    this.submitted = false;\n    this.instituteForm = this.fb.group({\n      instituteId: 0,\n      instituteName: ['', [Validators.required]],\n      universityId: ['', [Validators.required]]\n    });\n  }\n  ngOnInit() {\n    this.getUniversities();\n    this.avRoute.paramMap.subscribe(params => {\n      this.instituteId = params.get('id');\n    });\n    if (this.instituteId > 0) {\n      this.title = 'Edit';\n      this.thesisManagementSystemService.getInstituteData(this.instituteId).subscribe(response => {\n        this.instituteForm.setValue({\n          instituteId: response.instituteId,\n          instituteName: response.instituteName,\n          universityId: response.universityId\n        });\n      }, error => console.error(error));\n    }\n  }\n  getUniversities() {\n    this.thesisManagementSystemService.getUniversityList().subscribe(universityData => this.universities = universityData);\n  }\n  get registerFormControl() {\n    return this.instituteForm.controls;\n  }\n  save() {\n    this.submitted = true;\n    if (!this.instituteForm.valid) {\n      return;\n    }\n    if (this.instituteId > 0) {\n      this.updateInstitute();\n    } else {\n      this.addInstitute();\n    }\n  }\n  cancel() {\n    this.navigateToFetchInstitute();\n  }\n  addInstitute() {\n    this.thesisManagementSystemService.saveInstitute(this.instituteForm.value).subscribe(() => {\n      this.navigateToFetchInstitute();\n    }, error => console.error(error));\n  }\n  updateInstitute() {\n    this.thesisManagementSystemService.updateInstitute(this.instituteForm.value).subscribe(() => {\n      this.navigateToFetchInstitute();\n    }, error => console.error(error));\n  }\n  navigateToFetchInstitute() {\n    this.router.navigate(['/fetch-institute']);\n  }\n}\nAddInstituteComponent.ɵfac = function AddInstituteComponent_Factory(t) {\n  return new (t || AddInstituteComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.ThesisManagementSystemService), i0.ɵɵdirectiveInject(i2.Router));\n};\nAddInstituteComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AddInstituteComponent,\n  selectors: [[\"app-add-institute\"]],\n  decls: 28,\n  vars: 5,\n  consts: [[3, \"formGroup\", \"ngSubmit\"], [1, \"form-group\", \"row\"], [\"for\", \"universityId\", 1, \"control-label\", \"col-md-12\"], [1, \"col-md-4\"], [\"data-val\", \"true\", \"formControlName\", \"universityId\", 1, \"form-control\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [1, \"control-label\", \"col-md-12\"], [\"formControlName\", \"instituteName\", 2, \"width\", \"415px\"], [1, \"form-group\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"], [1, \"btn\", \"btn-danger\", 3, \"click\"], [3, \"value\"], [1, \"text-danger\"]],\n  template: function AddInstituteComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\");\n      i0.ɵɵtext(1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"h3\");\n      i0.ɵɵtext(3, \"Institute\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(4, \"hr\");\n      i0.ɵɵelementStart(5, \"form\", 0);\n      i0.ɵɵlistener(\"ngSubmit\", function AddInstituteComponent_Template_form_ngSubmit_5_listener() {\n        return ctx.save();\n      });\n      i0.ɵɵelementStart(6, \"div\", 1)(7, \"label\", 2);\n      i0.ɵɵtext(8, \"University\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\", 3)(10, \"select\", 4)(11, \"option\", 5);\n      i0.ɵɵtext(12, \"-- Select University --\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(13, AddInstituteComponent_option_13_Template, 2, 2, \"option\", 6);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(14, AddInstituteComponent_span_14_Template, 2, 0, \"span\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"div\", 1)(16, \"label\", 8);\n      i0.ɵɵtext(17, \"Institute Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"div\", 3);\n      i0.ɵɵelement(19, \"input\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(20, AddInstituteComponent_span_20_Template, 2, 0, \"span\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(21, \"br\");\n      i0.ɵɵelementStart(22, \"div\", 10)(23, \"button\", 11);\n      i0.ɵɵtext(24, \"Save\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(25, \" \\u00A0 \");\n      i0.ɵɵelementStart(26, \"button\", 12);\n      i0.ɵɵlistener(\"click\", function AddInstituteComponent_Template_button_click_26_listener() {\n        return ctx.cancel();\n      });\n      i0.ɵɵtext(27, \"Cancel\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate(ctx.title);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"formGroup\", ctx.instituteForm);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngForOf\", ctx.universities);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", (ctx.registerFormControl.universityId.touched || ctx.submitted) && (ctx.registerFormControl.universityId.errors == null ? null : ctx.registerFormControl.universityId.errors.required));\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", (ctx.registerFormControl.instituteName.touched || ctx.submitted) && (ctx.registerFormControl.instituteName.errors == null ? null : ctx.registerFormControl.instituteName.errors.required));\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["Validators","i0","AddInstituteComponent","constructor","fb","avRoute","thesisManagementSystemService","router","instituteForm","group","instituteId","instituteName","required","universityId","ngOnInit","getUniversities","paramMap","subscribe","params","get","title","getInstituteData","response","setValue","error","console","getUniversityList","universityData","universities","registerFormControl","controls","save","submitted","valid","updateInstitute","addInstitute","cancel","navigateToFetchInstitute","saveInstitute","value","navigate","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/nisadiker/Projects/ThesisManagementSystem/ThesisManagementSystem/ClientApp/src/app/add-institute/add-institute.component.ts","/Users/nisadiker/Projects/ThesisManagementSystem/ThesisManagementSystem/ClientApp/src/app/add-institute/add-institute.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, Validators, FormGroup } from '@angular/forms';\nimport { ActivatedRoute, Params, Router } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\nimport { Institute } from '../models/institute';\nimport { University } from '../models/university';\nimport { ThesisManagementSystemService } from '../services/thesisManagementSystem.service';\n\n\n@Component({\n  selector: 'app-add-institute',\n  templateUrl: './add-institute.component.html',\n  styleUrls: ['./add-institute.component.scss'],\n})\nexport class AddInstituteComponent implements OnInit {\n  public universities: University[] = [];\n  instituteForm: FormGroup;\n  title = 'Create';\n  instituteId: number = 0;\n  errorMessage: any;\n  submitted = false;\n\n\n\n  constructor(\n    private fb: FormBuilder,\n    private avRoute: ActivatedRoute,\n    private thesisManagementSystemService: ThesisManagementSystemService,\n    private router: Router\n  ) {\n\n    this.instituteForm = this.fb.group({\n      instituteId: 0,\n      instituteName: ['', [Validators.required]],\n      universityId: ['', [Validators.required]],\n      \n    });\n  }\n\n\n\n  ngOnInit(): void {\n    this.getUniversities();\n\n    this.avRoute.paramMap.subscribe((params: Params) => {\n      this.instituteId = params.get('id');\n    });\n\n    if (this.instituteId > 0) {\n      this.title = 'Edit';\n\n      this.thesisManagementSystemService.getInstituteData(this.instituteId).subscribe(\n        (response: Institute) => {\n          this.instituteForm.setValue(\n            {\n              instituteId: response.instituteId,\n              instituteName: response.instituteName,\n              universityId: response.universityId\n            });\n        },\n        (error) => console.error(error)\n      );\n      \n    }\n  }\n\n  getUniversities(): void {\n    this.thesisManagementSystemService\n      .getUniversityList()\n      .subscribe((universityData) => (this.universities = universityData));\n  }\n\n  get registerFormControl() {\n    return this.instituteForm.controls;\n  }\n\n  save(): void {\n    this.submitted = true;\n    if (!this.instituteForm.valid) {\n      return;\n    }\n\n    if (this.instituteId > 0) {\n      this.updateInstitute();\n    } else {\n      this.addInstitute();\n    }\n  }\n\n  cancel(): void {\n    this.navigateToFetchInstitute();\n  }\n\n  private addInstitute(): void {\n    \n    this.thesisManagementSystemService.saveInstitute(this.instituteForm.value).subscribe(\n      () => {\n        this.navigateToFetchInstitute();\n      },\n      (error) => console.error(error)\n    );\n    \n  }\n\n  private updateInstitute(): void {\n    this.thesisManagementSystemService.updateInstitute(this.instituteForm.value).subscribe(\n      () => {\n        this.navigateToFetchInstitute();\n      },\n      (error) => console.error(error)\n    );\n  }\n\n  private navigateToFetchInstitute() {\n    this.router.navigate(['/fetch-institute']);\n  }\n}\n","<h1>{{ title }}</h1>\n<h3>Institute</h3>\n<hr />\n\n<form [formGroup]=\"instituteForm\" (ngSubmit)=\"save()\">\n\n    <div class=\"form-group row\">\n        <label class=\"control-label col-md-12\" for=\"universityId\">University</label>\n        <div class=\"col-md-4\">\n            <select class=\"form-control\" data-val=\"true\" formControlName=\"universityId\">\n                <option value=\"\">-- Select University --</option>\n                <option *ngFor=\"let university of universities\" value=\"{{ university.universityId }}\">{{ university.universityName }}</option>\n            </select>\n        </div>\n        <span class=\"text-danger\" *ngIf=\"\n        (registerFormControl.universityId.touched || submitted) &&\n        registerFormControl.universityId.errors?.required\n      \">\n            University is required\n        </span>\n    </div>\n\n    <div class=\"form-group row\">\n        <label class=\"control-label col-md-12\">Institute Name</label>\n        <div class=\"col-md-4\">\n            <input formControlName=\"instituteName\" style=\"width:415px\" />\n        </div>\n        <span class=\"text-danger\" *ngIf=\"\n        (registerFormControl.instituteName.touched || submitted) &&\n        registerFormControl.instituteName.errors?.required\n      \">\n            Institute Name is required.\n        </span>\n    </div>\n\n\n    <br />\n    <div class=\"form-group\">\n        <button type=\"submit\" class=\"btn btn-primary\">Save</button>\n        &nbsp;\n        <button class=\"btn btn-danger\" (click)=\"cancel()\">Cancel</button>\n    </div>\n</form>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}