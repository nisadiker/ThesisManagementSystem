{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nlet AddThesisComponent = class AddThesisComponent {\n  constructor(fb, avRoute, thesisManagementSystemService, router, datepipe) {\n    this.fb = fb;\n    this.avRoute = avRoute;\n    this.thesisManagementSystemService = thesisManagementSystemService;\n    this.router = router;\n    this.datepipe = datepipe;\n    this.universities = [];\n    this.institutes = [];\n    this.persons = [];\n    this.title = 'Create';\n    this.thesisId = 0;\n    this.submitted = false;\n    this.thesisForm = this.fb.group({\n      thesisId: 0,\n      title: ['', [Validators.required]],\n      universityId: ['', [Validators.required]],\n      instituteId: ['', [Validators.required]],\n      abstract: ['', [Validators.required]],\n      submissionDate: ['', [Validators.required]],\n      thesisYear: ['', [Validators.required]],\n      thesisType: ['', [Validators.required]],\n      numberOfPages: ['', [Validators.required]],\n      thesisLanguage: ['', [Validators.required]],\n      authorId: ['', [Validators.required]],\n      supervisorId: ['', [Validators.required]],\n      cosupervisorId: ''\n    });\n  }\n  ngOnInit() {\n    this.getUniversities();\n    this.getPersons();\n    this.avRoute.paramMap.subscribe(params => {\n      this.thesisId = params.get('id');\n    });\n    if (this.thesisId > 0) {\n      this.title = 'Edit';\n      this.thesisManagementSystemService.getThesisData(this.thesisId).subscribe(response => {\n        this.getInstitutes(response.universityId);\n        this.thesisForm.setValue({\n          thesisId: response.thesisId,\n          title: response.title,\n          universityId: response.universityId,\n          instituteId: response.instituteId,\n          abstract: response.abstract,\n          submissionDate: this.datepipe.transform(response.submissionDate, 'yyyy-MM-dd'),\n          thesisYear: response.thesisYear,\n          thesisType: response.thesisType,\n          numberOfPages: response.numberOfPages,\n          thesisLanguage: response.thesisLanguage,\n          authorId: response.authorId,\n          supervisorId: response.supervisorId,\n          cosupervisorId: response.cosupervisorId == null ? '' : response.cosupervisorId\n        });\n      }, error => console.error(error));\n    }\n  }\n  onUniversitySelectChange(event) {\n    // You can access the selected value using event.target.value\n    const selectedValue = event.target.value;\n    // Call your method or perform actions based on the selected value\n    this.getInstitutes(selectedValue);\n  }\n  getUniversities() {\n    this.thesisManagementSystemService.getUniversityList().subscribe(universityData => this.universities = universityData);\n  }\n  getPersons() {\n    this.thesisManagementSystemService.getPersonList().subscribe(data => this.persons = data);\n  }\n  getInstitutes(universityId) {\n    this.thesisManagementSystemService.getInstituteListForUniversity(universityId).subscribe(instituteData => this.institutes = instituteData);\n  }\n  get registerFormControl() {\n    return this.thesisForm.controls;\n  }\n  save() {\n    this.submitted = true;\n    if (!this.thesisForm.valid) {\n      return;\n    }\n    if (this.thesisId > 0) {\n      this.updateThesis();\n    } else {\n      this.addThesis();\n    }\n  }\n  cancel() {\n    this.navigateToFetchThesis();\n  }\n  addThesis() {\n    this.thesisManagementSystemService.saveThesis(this.thesisForm.value).subscribe(() => {\n      this.navigateToFetchThesis();\n    }, error => console.error(error));\n  }\n  updateThesis() {\n    this.thesisManagementSystemService.updateThesis(this.thesisForm.value).subscribe(() => {\n      this.navigateToFetchThesis();\n    }, error => console.error(error));\n  }\n  navigateToFetchThesis() {\n    this.router.navigate(['/fetch-thesis']);\n  }\n};\nAddThesisComponent = __decorate([Component({\n  selector: 'app-add-thesis',\n  templateUrl: './add-thesis.component.html',\n  styleUrls: ['./add-thesis.component.scss']\n})], AddThesisComponent);\nexport { AddThesisComponent };","map":{"version":3,"mappings":"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","names":["Component","Validators","AddThesisComponent","constructor","fb","avRoute","thesisManagementSystemService","router","datepipe","thesisForm","group","thesisId","title","required","universityId","instituteId","abstract","submissionDate","thesisYear","thesisType","numberOfPages","thesisLanguage","authorId","supervisorId","cosupervisorId","ngOnInit","getUniversities","getPersons","paramMap","subscribe","params","get","getThesisData","response","getInstitutes","setValue","transform","error","console","onUniversitySelectChange","event","selectedValue","target","value","getUniversityList","universityData","universities","getPersonList","data","persons","getInstituteListForUniversity","instituteData","institutes","registerFormControl","controls","save","submitted","valid","updateThesis","addThesis","cancel","navigateToFetchThesis","saveThesis","navigate","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/Users/nisadiker/Projects/ThesisManagementSystem/ThesisManagementSystem/ClientApp/src/app/add-thesis/add-thesis.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, Validators, FormGroup } from '@angular/forms';\nimport { ActivatedRoute, Params, Router } from '@angular/router';\nimport { DatePipe } from '@angular/common'\nimport { Observable } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\nimport { Institute } from '../models/institute';\nimport { Thesis } from '../models/thesis';\nimport { University } from '../models/university';\nimport { ThesisManagementSystemService } from '../services/thesisManagementSystem.service';\nimport { Person } from '../models/person';\n\n\n@Component({\n  selector: 'app-add-thesis',\n  templateUrl: './add-thesis.component.html',\n  styleUrls: ['./add-thesis.component.scss'],\n})\nexport class AddThesisComponent implements OnInit {\n  public universities: University[] = [];\n  public institutes: Institute[] = [];\n  public persons: Person[] = [];\n  thesisForm: FormGroup;\n  title = 'Create';\n  thesisId: number = 0;\n  errorMessage: any;\n  submitted = false;\n\n\n\n  constructor(\n    private fb: FormBuilder,\n    private avRoute: ActivatedRoute,\n    private thesisManagementSystemService: ThesisManagementSystemService,\n    private router: Router,\n    private datepipe: DatePipe\n  ) {\n\n    this.thesisForm = this.fb.group({\n      thesisId: 0,\n      title: ['', [Validators.required]],\n      universityId: ['', [Validators.required]], \n      instituteId: ['', [Validators.required]], \n      abstract: ['', [Validators.required]],\n      submissionDate: ['', [Validators.required]],\n      thesisYear: ['', [Validators.required]],\n      thesisType: ['', [Validators.required]],\n      numberOfPages: ['', [Validators.required]],\n      thesisLanguage: ['', [Validators.required]],\n      authorId: ['', [Validators.required]],\n      supervisorId: ['', [Validators.required]],\n      cosupervisorId: '',\n    });\n  }\n\n\n\n  ngOnInit(): void {\n    this.getUniversities();\n    this.getPersons();\n\n    this.avRoute.paramMap.subscribe((params: Params) => {\n      this.thesisId = params.get('id');\n    });\n\n    if (this.thesisId > 0) {\n      this.title = 'Edit';\n\n      this.thesisManagementSystemService.getThesisData(this.thesisId).subscribe(\n        (response: Thesis) => {\n          this.getInstitutes(response.universityId);\n          this.thesisForm.setValue(\n            {\n              thesisId: response.thesisId,\n              title: response.title,\n              universityId: response.universityId,\n              instituteId: response.instituteId,\n              abstract: response.abstract,\n              submissionDate: this.datepipe.transform(response.submissionDate, 'yyyy-MM-dd'),\n              thesisYear: response.thesisYear,\n              thesisType: response.thesisType,\n              numberOfPages: response.numberOfPages,\n              thesisLanguage: response.thesisLanguage,\n              authorId: response.authorId,\n              supervisorId: response.supervisorId,\n              cosupervisorId: response.cosupervisorId == null ? '' : response.cosupervisorId\n            });\n        },\n        (error) => console.error(error)\n      );\n      \n    }\n  }\n\n  onUniversitySelectChange(event: any) {\n    // You can access the selected value using event.target.value\n    const selectedValue = event.target.value;\n\n    // Call your method or perform actions based on the selected value\n    this.getInstitutes(selectedValue);\n  }\n\n  getUniversities(): void {\n    this.thesisManagementSystemService\n      .getUniversityList()\n      .subscribe((universityData) => (this.universities = universityData));\n  }\n  getPersons(): void {\n    this.thesisManagementSystemService\n      .getPersonList()\n      .subscribe((data) => (this.persons = data));\n  }\n\n  getInstitutes(universityId: number): void {\n    this.thesisManagementSystemService\n      .getInstituteListForUniversity(universityId)\n      .subscribe((instituteData) => (this.institutes = instituteData));\n  }\n\n  get registerFormControl() {\n    return this.thesisForm.controls;\n  }\n\n  save(): void {\n    this.submitted = true;\n    if (!this.thesisForm.valid) {\n      return;\n    }\n\n    if (this.thesisId > 0) {\n      this.updateThesis();\n    } else {\n      this.addThesis();\n    }\n  }\n\n  cancel(): void {\n    this.navigateToFetchThesis();\n  }\n\n  private addThesis(): void {\n    \n    this.thesisManagementSystemService.saveThesis(this.thesisForm.value).subscribe(\n      () => {\n        this.navigateToFetchThesis();\n      },\n      (error) => console.error(error)\n    );\n    \n  }\n\n  private updateThesis(): void {\n    this.thesisManagementSystemService.updateThesis(this.thesisForm.value).subscribe(\n      () => {\n        this.navigateToFetchThesis();\n      },\n      (error) => console.error(error)\n    );\n  }\n\n  private navigateToFetchThesis() {\n    this.router.navigate(['/fetch-thesis']);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}